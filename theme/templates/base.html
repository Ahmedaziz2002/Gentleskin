{% load static %}
{% load tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gentle Skin Routine{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'css/dist/styles.css' %}">

    <meta name="description" content="{% block description %}Evidence-based skincare guidance focused on barrier health and gentle routines.{% endblock %}">
    <link rel="canonical" href="{{ request.build_absolute_uri }}">

    <meta property="og:title" content="{% block og_title %}Gentle Skin{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Skincare routines that protect and support your skin barrier.{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}Gentle Skin{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Calm, protect, strengthen your skin barrier.{% endblock %}">

    {% tailwind_css %}
</head>

<body class="bg-stone-50 text-stone-800 font-sans antialiased">

<!-- HEADER / NAVBAR -->
<header class="bg-white shadow-sm sticky top-0 z-50 border-b border-stone-200">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">

    <!-- Logo -->
    <a href="/" 
       class="text-2xl sm:text-3xl font-serif font-bold text-emerald-700 tracking-tight">
        Gentle Skin Routine
    </a>

    <!-- Navigation -->
    <nav class="flex items-center gap-10 text-sm sm:text-base font-medium">

        <!-- Home -->
        <a href="/"
           class="transition hover:text-emerald-600 {% if request.path == '/' %} text-emerald-600 font-semibold {% endif %}">
            Home
        </a>

        <!-- About -->
        <a href="/about/"
           class="transition hover:text-emerald-600 {% if request.path == '/about/' %} text-emerald-600 font-semibold {% endif %}">
            About
        </a>

        <!-- Categories Dropdown -->
        <div class="relative">
            <button id="categoryBtn"
                class="flex items-center gap-2 px-4 py-2 rounded-lg border border-stone-300 hover:border-emerald-500 hover:text-emerald-600 transition">
                Categories
                <svg xmlns="http://www.w3.org/2000/svg" 
                     class="w-4 h-4"
                     fill="none" 
                     viewBox="0 0 24 24" 
                     stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
            </button>

            <!-- Dropdown Menu -->
            <div id="categoryMenu"
                 class="hidden absolute right-0 mt-3 w-56 bg-white border border-stone-200 rounded-xl shadow-lg py-3 z-50">

                {% for category in categories %}
                    <a href="{% url 'category_posts' category.slug %}"
                       class="block px-4 py-2 text-sm hover:bg-stone-100 hover:text-emerald-600 transition {% if request.path == category.get_absolute_url %} text-emerald-600 font-semibold {% endif %}">
                        {{ category.name }}
                    </a>
                {% endfor %}

            </div>
        </div>

    </nav>
  </div>
</header>

<!-- MAIN CONTENT -->
<main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 lg:py-16">
    {% block content %}{% endblock %}
</main>

<!-- FOOTER -->
<footer class="bg-white border-t mt-12 sm:mt-16">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-sm text-stone-600 space-y-4">

    <p>
      Some of the links on this website are affiliate links. If you choose to buy through these links, we may earn a small commission. This comes at no extra cost to you.
    </p>

    <p>
      All content is educational and not a substitute for professional medical advice.
    </p>

    <p>
      <a href="{% url 'privacy' %}" class="underline hover:text-emerald-600">
        Privacy Policy
      </a>
    </p>

    <p class="text-stone-400 text-xs sm:text-sm">
      Â© {% now "Y" %} Gentle Skin Routine
    </p>

  </div>
</footer>

<!-- Scripts -->
<script>
document.addEventListener("DOMContentLoaded", function() {

    // Cookie Consent
    if (!localStorage.getItem("cookie_consent")) {
        const banner = document.createElement("div");
        banner.innerHTML = `
            <div class="fixed bottom-0 w-full bg-emerald-700 text-white p-4 text-center z-50 flex flex-col sm:flex-row justify-center items-center gap-4">
                <span>This website uses cookies to improve performance and track affiliate links.</span>
                <button id="acceptCookies" class="px-4 py-2 bg-white text-emerald-700 rounded-lg hover:bg-gray-100 transition">
                    Accept
                </button>
            </div>
        `;
        document.body.appendChild(banner);

        document.getElementById("acceptCookies").onclick = function() {
            localStorage.setItem("cookie_consent", "true");
            banner.remove();
        };
    }

    // Category Dropdown
    const categoryBtn = document.getElementById("categoryBtn");
    const categoryMenu = document.getElementById("categoryMenu");

    categoryBtn.addEventListener("click", function(event) {
        event.stopPropagation();
        categoryMenu.classList.toggle("hidden");
    });

    document.addEventListener("click", function(event) {
        if (!categoryBtn.contains(event.target) && !categoryMenu.contains(event.target)) {
            categoryMenu.classList.add("hidden");
        }
    });

});
</script>

</body>
</html>
s
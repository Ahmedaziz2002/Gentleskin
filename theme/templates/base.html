{% load static %}
{% load tailwind_tags %}
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gentle Skin Routine{% endblock %}</title>

    <link rel="stylesheet" href="{% static 'css/dist/styles.css' %}">

    <meta name="description" content="{% block description %}Evidence-based skincare guidance focused on barrier health and gentle routines.{% endblock %}">
    <link rel="canonical" href="{{ request.build_absolute_uri }}">

    {% tailwind_css %}
</head>

<body class="bg-gradient-to-b from-stone-50 via-white to-stone-100 text-stone-800 font-sans antialiased selection:bg-emerald-200 selection:text-emerald-900">

<!-- HEADER -->
<header class="sticky top-0 z-50 backdrop-blur-lg bg-white/80 border-b border-stone-200">
  <div class="max-w-7xl mx-auto px-6 py-5 flex items-center justify-between">

    <!-- Logo -->
    <a href="/" 
       class="text-2xl sm:text-3xl font-serif font-black tracking-tight text-stone-900 hover:opacity-80 transition">
        Gentle<span class="text-emerald-600">Skin</span>
    </a>

    <!-- Navigation -->
    <nav class="hidden md:flex items-center gap-8 text-sm font-medium tracking-wide">

        <a href="/"
           class="relative pb-1 hover:text-emerald-600 transition
           {% if request.path == '/' %} text-emerald-600 {% endif %}">
            Home
        </a>

        <a href="/about/"
           class="relative pb-1 hover:text-emerald-600 transition
           {% if request.path == '/about/' %} text-emerald-600 {% endif %}">
            About
        </a>

        {% for category in categories %}
            <a href="{% url 'category_posts' category.slug %}"
               class="hover:text-emerald-600 transition
               {% if request.path == category.get_absolute_url %} text-emerald-600 {% endif %}">
                {{ category.name }}
            </a>
        {% endfor %}

        <!-- CTA Button -->
        <a href="#"
           class="ml-4 px-4 py-2 rounded-full bg-emerald-600 text-white hover:bg-emerald-700 transition shadow-sm">
            Best Picks
        </a>
    </nav>

    <!-- Mobile Button -->
    <button id="mobileMenuBtn" class="md:hidden text-stone-800 focus:outline-none">
        ☰
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobileMenu" class="hidden md:hidden px-6 pb-4 space-y-4 bg-white border-t border-stone-200">
      <a href="/" class="block hover:text-emerald-600">Home</a>
      <a href="/about/" class="block hover:text-emerald-600">About</a>
      {% for category in categories %}
          <a href="{% url 'category_posts' category.slug %}" class="block hover:text-emerald-600">
              {{ category.name }}
          </a>
      {% endfor %}
  </div>
</header>

<!-- MAIN -->
<main class="max-w-5xl mx-auto px-6 py-16">

    <!-- Subtle Intro Divider -->
    <div class="h-1 w-20 bg-emerald-500 rounded-full mb-12"></div>

    {% block content %}{% endblock %}

</main>

<!-- FOOTER -->
<footer class="mt-24 bg-stone-900 text-stone-300">
  <div class="max-w-6xl mx-auto px-6 py-14 space-y-6 text-sm">

    <h3 class="text-lg font-semibold text-white tracking-wide">
        Gentle Skin Routine
    </h3>

    <p class="text-stone-400 leading-relaxed max-w-2xl">
        Evidence-based skincare recommendations designed to protect your barrier 
        and simplify your routine.
    </p>

    <div class="border-t border-stone-700 pt-6 flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-stone-500">

        <div>
            © {% now "Y" %} Gentle Skin Routine
        </div>

        <div class="flex gap-6">
            <a href="{% url 'privacy' %}" class="hover:text-white transition">
                Privacy Policy
            </a>
        </div>
    </div>
  </div>
</footer>

<!-- COOKIE BANNER -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    if (!localStorage.getItem("cookie_consent")) {
        const banner = document.createElement("div");
        banner.innerHTML = `
            <div class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-white shadow-xl border border-stone-200 rounded-xl px-6 py-4 text-sm flex flex-col sm:flex-row items-center gap-4 z-50 max-w-lg">
                <span class="text-stone-600">
                    We use cookies to improve performance and support affiliate tracking.
                </span>
                <button id="acceptCookies"
                    class="px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700 transition">
                    Accept
                </button>
            </div>
        `;
        document.body.appendChild(banner);

        document.getElementById("acceptCookies").onclick = function() {
            localStorage.setItem("cookie_consent", "true");
            banner.remove();
        };
    }

    document.getElementById("mobileMenuBtn").onclick = function() {
        document.getElementById("mobileMenu").classList.toggle("hidden");
    };
});
</script>

</body>
</html>
